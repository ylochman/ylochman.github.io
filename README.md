Adapted from [Hyde](https://github.com/poole/hyde).